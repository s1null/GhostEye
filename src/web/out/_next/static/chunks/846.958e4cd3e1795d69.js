"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[846],{4846:function(e,t,a){a.r(t),a.d(t,{CommandInput:function(){return ex}});var n=a(7437),r=a(2265),o=a(5186),s=a(2869),i=a(5974),l=a(9205);let c=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d=(0,l.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),u=(0,l.Z)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),m=(0,l.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var p=a(6741),f=a(8575),h=a(3966),g=a(9255),x=a(886),y=a(5278),v=a(9103),j=a(3832),N=a(1599),w=a(6840),b=a(6097),C=a(9157),k=a(5478),D=a(7053),E="Dialog",[S,T]=(0,h.b)(E),[I,_]=S(E),R=e=>{let{__scopeDialog:t,children:a,open:o,defaultOpen:s,onOpenChange:i,modal:l=!0}=e,c=r.useRef(null),d=r.useRef(null),[u=!1,m]=(0,x.T)({prop:o,defaultProp:s,onChange:i});return(0,n.jsx)(I,{scope:t,triggerRef:c,contentRef:d,contentId:(0,g.M)(),titleId:(0,g.M)(),descriptionId:(0,g.M)(),open:u,onOpenChange:m,onOpenToggle:r.useCallback(()=>m(e=>!e),[m]),modal:l,children:a})};R.displayName=E;var A="DialogTrigger";r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,o=_(A,a),s=(0,f.e)(t,o.triggerRef);return(0,n.jsx)(w.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Q(o.open),...r,ref:s,onClick:(0,p.M)(e.onClick,o.onOpenToggle)})}).displayName=A;var O="DialogPortal",[M,F]=S(O,{forceMount:void 0}),P=e=>{let{__scopeDialog:t,forceMount:a,children:o,container:s}=e,i=_(O,t);return(0,n.jsx)(M,{scope:t,forceMount:a,children:r.Children.map(o,e=>(0,n.jsx)(N.z,{present:a||i.open,children:(0,n.jsx)(j.h,{asChild:!0,container:s,children:e})}))})};P.displayName=O;var z="DialogOverlay",U=r.forwardRef((e,t)=>{let a=F(z,e.__scopeDialog),{forceMount:r=a.forceMount,...o}=e,s=_(z,e.__scopeDialog);return s.modal?(0,n.jsx)(N.z,{present:r||s.open,children:(0,n.jsx)(V,{...o,ref:t})}):null});U.displayName=z;var V=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,o=_(z,a);return(0,n.jsx)(C.Z,{as:D.g7,allowPinchZoom:!0,shards:[o.contentRef],children:(0,n.jsx)(w.WV.div,{"data-state":Q(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),B="DialogContent",W=r.forwardRef((e,t)=>{let a=F(B,e.__scopeDialog),{forceMount:r=a.forceMount,...o}=e,s=_(B,e.__scopeDialog);return(0,n.jsx)(N.z,{present:r||s.open,children:s.modal?(0,n.jsx)(Z,{...o,ref:t}):(0,n.jsx)(q,{...o,ref:t})})});W.displayName=B;var Z=r.forwardRef((e,t)=>{let a=_(B,e.__scopeDialog),o=r.useRef(null),s=(0,f.e)(t,a.contentRef,o);return r.useEffect(()=>{let e=o.current;if(e)return(0,k.Ry)(e)},[]),(0,n.jsx)(L,{...e,ref:s,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,p.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=a.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,p.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,p.M)(e.onFocusOutside,e=>e.preventDefault())})}),q=r.forwardRef((e,t)=>{let a=_(B,e.__scopeDialog),o=r.useRef(!1),s=r.useRef(!1);return(0,n.jsx)(L,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,r;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented||(o.current||null===(r=a.triggerRef.current)||void 0===r||r.focus(),t.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:t=>{var n,r;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(o.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let i=t.target;(null===(r=a.triggerRef.current)||void 0===r?void 0:r.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),L=r.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,...l}=e,c=_(B,a),d=r.useRef(null),u=(0,f.e)(t,d);return(0,b.EW)(),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.M,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:i,children:(0,n.jsx)(y.XB,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Q(c.open),...l,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ea,{titleId:c.titleId}),(0,n.jsx)(en,{contentRef:d,descriptionId:c.descriptionId})]})]})}),H="DialogTitle",X=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,o=_(H,a);return(0,n.jsx)(w.WV.h2,{id:o.titleId,...r,ref:t})});X.displayName=H;var G="DialogDescription",J=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,o=_(G,a);return(0,n.jsx)(w.WV.p,{id:o.descriptionId,...r,ref:t})});J.displayName=G;var K="DialogClose",Y=r.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,o=_(K,a);return(0,n.jsx)(w.WV.button,{type:"button",...r,ref:t,onClick:(0,p.M)(e.onClick,()=>o.onOpenChange(!1))})});function Q(e){return e?"open":"closed"}Y.displayName=K;var $="DialogTitleWarning",[ee,et]=(0,h.k)($,{contentName:B,titleName:H,docsSlug:"dialog"}),ea=e=>{let{titleId:t}=e,a=et($),n="`".concat(a.contentName,"` requires a `").concat(a.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(a.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(a.docsSlug);return r.useEffect(()=>{t&&!document.getElementById(t)&&console.error(n)},[n,t]),null},en=e=>{let{contentRef:t,descriptionId:a}=e,n=et("DialogDescriptionWarning"),o="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(n.contentName,"}.");return r.useEffect(()=>{var e;let n=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");a&&n&&!document.getElementById(a)&&console.warn(o)},[o,t,a]),null},er=a(2489),eo=a(4508);let es=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(U,{ref:t,className:(0,eo.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});es.displayName=U.displayName;let ei=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,n.jsxs)(P,{children:[(0,n.jsx)(es,{}),(0,n.jsxs)(W,{ref:t,className:(0,eo.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[r,(0,n.jsxs)(Y,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(er.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ei.displayName=W.displayName;let el=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,eo.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};el.displayName="DialogHeader";let ec=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,eo.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ec.displayName="DialogFooter";let ed=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(X,{ref:t,className:(0,eo.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});ed.displayName=X.displayName;let eu=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(J,{ref:t,className:(0,eo.cn)("text-sm text-muted-foreground",a),...r})});eu.displayName=J.displayName;var em=a(6815);let ep=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("textarea",{className:(0,eo.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});ep.displayName="Textarea";let ef=(0,l.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function eh(e){let{open:t,onOpenChange:a,onSave:i,onDelete:l,editCommand:c,title:d="Add Command"}=e,[u,m]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[x,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c?(m(c.name),f(c.command),g(c.description||"")):(m(""),f(""),g(""))},[c,t]);let N=async()=>{if(u.trim()&&p.trim()){y(!0);try{await i(u.trim(),p.trim(),h.trim()),a(!1)}catch(e){}finally{y(!1)}}},w=async()=>{if(c&&l){j(!0);try{await l(c),a(!1)}catch(e){}finally{j(!1)}}};return(0,n.jsx)(R,{open:t,onOpenChange:a,children:(0,n.jsxs)(ei,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(el,{children:[(0,n.jsx)(ed,{children:d}),(0,n.jsx)(eu,{children:"Add or edit your commands. You can quickly use these commands after creation."})]}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(em._,{htmlFor:"name",className:"text-right",children:"Name"}),(0,n.jsx)(o.I,{id:"name",value:u,onChange:e=>m(e.target.value),className:"col-span-3",disabled:!!c,placeholder:"Example: View processes"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(em._,{htmlFor:"command",className:"text-right",children:"Command"}),(0,n.jsx)(o.I,{id:"command",value:p,onChange:e=>f(e.target.value),className:"col-span-3",placeholder:"Example: ps aux"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(em._,{htmlFor:"description",className:"text-right",children:"Description"}),(0,n.jsx)(ep,{id:"description",value:h,onChange:e=>g(e.target.value),className:"col-span-3",placeholder:"Description of command usage (optional)",rows:3})]})]}),(0,n.jsxs)(ec,{className:"flex items-center justify-between",children:[c&&l&&(0,n.jsxs)(s.z,{type:"button",variant:"destructive",onClick:w,disabled:v||x,className:"mr-auto",children:[(0,n.jsx)(ef,{className:"h-4 w-4 mr-2"}),v?"Deleting...":"Delete"]}),(0,n.jsx)(s.z,{type:"submit",onClick:N,disabled:!u.trim()||!p.trim()||x||v,children:x?"Saving...":"Save Command"})]})]})})}var eg=a(7992);function ex(e){let{config:t,onSubmit:a}=e,[l,p]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(void 0),{commands:y,loading:v,error:j,addCommand:N,updateCommand:w,deleteCommand:b,initialized:C}=function(e){let[t,a]=(0,r.useState)([]),[n,o]=(0,r.useState)(!1),[s,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),{toast:d}=(0,eg.pm)(),u=(0,r.useRef)(0),m=(0,r.useCallback)(t=>e&&e.ip&&e.port?"http://".concat(e.ip,":").concat(e.port).concat(t):window.env&&window.env.NEXT_PUBLIC_API_URL?"".concat(window.env.NEXT_PUBLIC_API_URL).concat(t):t,[e]),p=(0,r.useCallback)(()=>localStorage.getItem("terminal_auth_token"),[]),f=(0,r.useCallback)(async()=>{if(n||u.current>=3)return;u.current+=1,o(!0),i(null);let e=p();if(!e){o(!1),c(!0);return}try{let t=m("/api/commands"),n=await fetch(t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!n.ok){let e="Failed to fetch commands";try{let t=await n.json();e=t.error||t.message||e}catch(t){e="".concat(e,": ").concat(n.statusText)}throw Error(e)}let r=await n.json();a(r.data||[]),u.current=0}catch(t){let e=t instanceof Error?t.message:"Error occurred while fetching commands";i(e),1===u.current&&d({title:"Failed to fetch commands",description:e,variant:"destructive"})}finally{o(!1),c(!0)}},[d,m,p]),h=(0,r.useCallback)(async(e,t,a)=>{if(n)return;o(!0),i(null);let r=p();if(!r){i("Not logged in, please login first"),o(!1);return}try{let n=m("/api/commands/add"),o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({name:e,command:t,description:a})});if(!o.ok){let e="Failed to add command";try{let t=await o.json();e=t.error||t.message||e}catch(t){e="".concat(e,": ").concat(o.statusText)}throw Error(e)}d({title:"Add successful",description:'Command "'.concat(e,'" has been added')}),u.current=0,await f()}catch(t){let e=t instanceof Error?t.message:"Error occurred while adding command";i(e),d({title:"Failed to add command",description:e,variant:"destructive"})}finally{o(!1)}},[f,d,m,p]),g=(0,r.useCallback)(async(e,t,a)=>{if(n)return;o(!0),i(null);let r=p();if(!r){i("Not logged in, please login first"),o(!1);return}try{let n=m("/api/commands/update"),o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({name:e,command:t,description:a})});if(!o.ok){let e="Failed to update command";try{let t=await o.json();e=t.error||t.message||e}catch(t){e="".concat(e,": ").concat(o.statusText)}throw Error(e)}d({title:"Update successful",description:'Command "'.concat(e,'" has been updated')}),u.current=0,await f()}catch(t){let e=t instanceof Error?t.message:"Error occurred while updating command";i(e),d({title:"Failed to update command",description:e,variant:"destructive"})}finally{o(!1)}},[f,d,m,p]),x=(0,r.useCallback)(async e=>{if(n)return;o(!0),i(null);let t=p();if(!t){i("Not logged in, please login first"),o(!1);return}try{let a=m("/api/commands/delete?name=".concat(encodeURIComponent(e))),n=await fetch(a,{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok){let e="Failed to delete command";try{let t=await n.json();e=t.error||t.message||e}catch(t){e="".concat(e,": ").concat(n.statusText)}throw Error(e)}d({title:"Delete successful",description:'Command "'.concat(e,'" has been deleted')}),u.current=0,await f()}catch(t){let e=t instanceof Error?t.message:"Error occurred while deleting command";i(e),d({title:"Failed to delete command",description:e,variant:"destructive"})}finally{o(!1)}},[f,d,m,p]);return(0,r.useEffect)(()=>{l||f()},[null==e?void 0:e.ip,null==e?void 0:e.port,l,f]),{commands:t,loading:n,error:s,fetchCommands:f,addCommand:h,updateCommand:g,deleteCommand:x,initialized:l}}({ip:t.ip,port:t.port}),{toast:k}=(0,eg.pm)(),D=()=>{l.trim()&&(a(l),p(""))},E=e=>{p(t=>t.endsWith(" ")||""===t?t+e:t+" "+e)},S=()=>{x(void 0),h(!0)},T=e=>{x(e),h(!0)},I=async(e,t,a)=>{try{g?await w(e,t,a):await N(e,t,a)}catch(e){}},_=async e=>{try{await b(e.name),k({title:"Delete successful",description:'Command "'.concat(e.name,'" has been deleted')})}catch(e){k({title:"Delete failed",description:"Unable to delete command, please try again later",variant:"destructive"})}};return(0,n.jsxs)("div",{className:"space-y-4",children:[v&&!C?(0,n.jsx)("div",{className:"text-center py-2 text-muted-foreground",children:"Loading commands..."}):C&&0===y.length?(0,n.jsx)("div",{className:"flex items-center justify-center py-1 gap-2",children:(0,n.jsx)(i.C,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors",children:(0,n.jsxs)("div",{onClick:S,className:"flex items-center",children:[(0,n.jsx)(c,{className:"h-3 w-3 mr-1"}),"Add Command"]})})}):(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[y.map(e=>(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(i.C,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors group",children:(0,n.jsxs)("div",{onClick:()=>E(e.command),className:"flex items-center",children:[e.name,(0,n.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 opacity-0 group-hover:opacity-100",onClick:t=>{t.stopPropagation(),T(e)},children:(0,n.jsx)(d,{className:"h-3 w-3"})})]})})},e.id)),(0,n.jsx)(i.C,{variant:"outline",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors",children:(0,n.jsxs)("div",{onClick:S,className:"flex items-center",children:[(0,n.jsx)(c,{className:"h-3 w-3 mr-1"}),"Add Command"]})})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(o.I,{value:l,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D()},placeholder:"Enter command...",className:"flex-1"}),(0,n.jsxs)(s.z,{onClick:()=>{if(!l.trim()){k({title:"Command is empty",description:"Please enter a command to convert",variant:"destructive"});return}try{let e=btoa(l);p('echo "'.concat(e,'" | base64 -d | bash')),k({title:"Conversion successful",description:"Command has been converted to base64 format"})}catch(e){k({title:"Conversion failed",description:"Unable to convert command, please check your input",variant:"destructive"})}},className:"flex items-center gap-2",variant:"outline",title:"Convert to base64 format command",children:[(0,n.jsx)(u,{className:"h-4 w-4"}),"Base64"]}),(0,n.jsxs)(s.z,{onClick:D,className:"flex items-center gap-2",children:[(0,n.jsx)(m,{className:"h-4 w-4"}),"Send"]})]}),(0,n.jsx)(eh,{open:f,onOpenChange:h,onSave:I,onDelete:_,editCommand:g,title:g?"Edit Command":"Add Command"})]})}},7992:function(e,t,a){a.d(t,{pm:function(){return m}});var n=a(2265);let r=0,o=new Map,s=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?s(a):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||n()}}}),{id:a,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=n.useState(c);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}}]);